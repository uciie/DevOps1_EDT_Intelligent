' Generated by UML Generator
' Encoded: tHhBSjiux9wlqFJaR9DEBxi7Jvkj4oUTp3IffqvxPoJQOIk9BacvpUxiloz0KXHVifrEzhANnW88403n8jXtKX6XkgO-ajzOko62D4LP4obdIWbstobwNV9soVwYnUkZ1rRHecIYhEdHaLvLt17vRKd5bfNqkjdKnTz7HN6g0FY9RhXaYel7gLuqVECAkgMjyfTSXW1Sqqag_2MVWs-z3oLDi4_mZIjMlEoabMzQN7bVY3s5Vrv66ans2tzIx1FzfDWj-4cnM-oJObpeOnHuJHNA9CyVaN22tAwhQV61j-jZ-CEaUeFuit0j2d5TJJhzPy_gcPHitTBgZYFLNfevhUcQA5YFn9DIK0AAxDlb_174OSCYX25QarFyqaTX42T5ohKdw3QLJz2lW7FG22sLuz890QVrETGemucDS_48Aj0y8W3ibhCAiPkQj6prc95C1nr-bAIUuvQieU1PRHN1-gt-wSDDEyDvpSjl9jBwNVjuCSw6NteBv16nrD7NLYEOLKr_idjMCmL-oLgbzv0BmHKjmGZJufxpcfBMxg0wEIsMa2ZQTV6sU36xkBl-Slb28xlrcaeWENzSFiBVPY1rokZ0IVMGNTCGZ0l3-DULAU7tMaVOh5Hi2pfTM0XYmOX4CTuQGloLLshnONPxUpb_aPfuS4_ygkW6CwcWidTuGRQqHc7GxK-946nBwX6iJaNQ89FZuMTa2kiu6NMrysJWpydB93QZVf-888IFtSczb1gGYGHOQVEFjng0IoCJGjrX8vSU7iaSSbpsyXkcuU5hBcx1cAeXmqkZzXYx7ZrYwLWsSADKBmCEdIor4z9P9qCgbuIjxOFrlVFsKbj7HZg7IbqzvA4pb9VMf0KfF-Tvw_imGffCQ26zMp8UX1xF1o8VBdYbJM-opalwlODWcV3xhzFYu_rNI3_7GVRP2Fg9DdohQJIVC4dQYcdIoo7j1Z1SKIWE9Orhj-QtoA1Tu89D1hoC2sQ6nr1jnkXEYfR-GAJCCXXd2pc68UCvURpbwkEMYfgJYbOHzyhwxRWRhrXRNGbAtvEDp11xXAx40uDbpLLVvZzk56kWTQpCYG3cLnX16O6AzxsZ2o8-KCqgvaAXKKso5SYVAfSlGXUyLOBNDHMUlxWExDBxEh2fZBXEnXaUqkxfzRQ7Yvth4vKRtafwsIg8hJVQV7hzsLc6UjPM2oeOZxt1DYHzQT2TYCjE1suHDtGHsPzdGtTdAfADIZXPgLn8wgynQXCoXdheq9x2nyWzz6uXhx5z1GKlAhiQ_SZLxTWBuUizv-kQta30J8jpusbPbg7tMM6DwprRz-CBb-ztxBvXgpHigmHfGN2XRY0p-uYyeduo_D_MzRIBaGuO1UQU6ZqOVq-f7bpPhzZ-sIHc3h7PSnmlw06dJ1aVQLe6Zq0cWqzO0tdeqJW9gtYaluaEKbNGO4lV6o4ecUfGipdlxcjgVBrT9y2MD84RzyuwCpmJtNjuj6Tqj7Ptf7PRwHFj4R5yiMjOILC63fDe4xAu9Ktg0XheQ-pHA9vj6ftbqP_prylOX1jO_eEBoeVfRDpVSbowrPSb6Oq2z0370U7tS1KoRR3x5Mz-KiHR7_zQ7_dqIqoRCxT3n8A6z0ihT4Bl48bQOIRJjfqSnzRLQSpWCkPFc_s1XPlAo1wJ75H4ZaSsaDj3q-GQannflZsFEwu3UYhOtC3DQ05STdytcMjTN7FfrM5KD7NvYfAgPcskkjPwA-j7nTjY1Kwc4R1F7SG8YjhW16dU2PlQxM1b0usOy2Sj5MzfSCa9vmtwQ6s3evEX6TDHRo811ZVpn62yQGB9NEbyyQ1roWe7qUMB1eRr1VFd0DXxPstq7-xec-6Pjx53ndwdqC1cS6lC-_JvnntAbrPg3GraZo8-riDBRJA7pYiUfI5hX92NWmOsyYYPd8Ev9c7-148D3IovUwInguyQdNFOsTZW_WwOyF5k5xsR1ApiU9j6OnO73eyzJNzwL69YhCzx4yyr0eFre_78Qan2Vv0nfOO6kINSVcwZRQoNTVYni0ovHJxbqk6ShaXNgsNvGAkkflqzNZnvgBB_9KZfvvSQwZ880X60VQPTc83jhSJUlrork8j11nQKFLfEzh_qx7ihUefoiFe0rVQE2w1LVUXMgvgEt4TESQnp0PMNIJpvGryYRDfD6WiJZK4TZKkx6XxOflvxuHFUvxn9oXYtG-Oe6CwcoJbWYA9xdv4dhYUH3mzQLrma8npZ96xA6h5oxLdsQSf_7zijakEJVx6ALdy1LpbxjXUix4J5fbBRSePFc3lC6TnHek6dyRPuxD6GdwOpNb0n9wQcGR_skyQnLlC8IYKW_tZjV1Flp9SjWKjNvRTxIdHq61eBE-4qumFtqnFjRGxwwcPsTtqRN7aYbOORK8m8ZdlN4yjDgBzNyX4P6I34BXBb49zHvA0vY4nboPrDH14Bc3soa2OZze7759Jkg-ZuqsATh1Zr6EyE5F-7YTzEJyEy5ozuzUhCFCnuRxz8f3iNyuIQ-Hme-fgDV79F1l40F14eNe2C_BdbKJ34HF9ungK72XmGfbgupq78NVlhkvbJqNqPNliwbOJRFWAdtL5Kox9oHMRH2hs3BDWrzRy
' URL: http://www.plantuml.com/plantuml/uml/tHhBSjiux9wlqFJaR9DEBxi7Jvkj4oUTp3IffqvxPoJQOIk9BacvpUxiloz0KXHVifrEzhANnW88403n8jXtKX6XkgO-ajzOko62D4LP4obdIWbstobwNV9soVwYnUkZ1rRHecIYhEdHaLvLt17vRKd5bfNqkjdKnTz7HN6g0FY9RhXaYel7gLuqVECAkgMjyfTSXW1Sqqag_2MVWs-z3oLDi4_mZIjMlEoabMzQN7bVY3s5Vrv66ans2tzIx1FzfDWj-4cnM-oJObpeOnHuJHNA9CyVaN22tAwhQV61j-jZ-CEaUeFuit0j2d5TJJhzPy_gcPHitTBgZYFLNfevhUcQA5YFn9DIK0AAxDlb_174OSCYX25QarFyqaTX42T5ohKdw3QLJz2lW7FG22sLuz890QVrETGemucDS_48Aj0y8W3ibhCAiPkQj6prc95C1nr-bAIUuvQieU1PRHN1-gt-wSDDEyDvpSjl9jBwNVjuCSw6NteBv16nrD7NLYEOLKr_idjMCmL-oLgbzv0BmHKjmGZJufxpcfBMxg0wEIsMa2ZQTV6sU36xkBl-Slb28xlrcaeWENzSFiBVPY1rokZ0IVMGNTCGZ0l3-DULAU7tMaVOh5Hi2pfTM0XYmOX4CTuQGloLLshnONPxUpb_aPfuS4_ygkW6CwcWidTuGRQqHc7GxK-946nBwX6iJaNQ89FZuMTa2kiu6NMrysJWpydB93QZVf-888IFtSczb1gGYGHOQVEFjng0IoCJGjrX8vSU7iaSSbpsyXkcuU5hBcx1cAeXmqkZzXYx7ZrYwLWsSADKBmCEdIor4z9P9qCgbuIjxOFrlVFsKbj7HZg7IbqzvA4pb9VMf0KfF-Tvw_imGffCQ26zMp8UX1xF1o8VBdYbJM-opalwlODWcV3xhzFYu_rNI3_7GVRP2Fg9DdohQJIVC4dQYcdIoo7j1Z1SKIWE9Orhj-QtoA1Tu89D1hoC2sQ6nr1jnkXEYfR-GAJCCXXd2pc68UCvURpbwkEMYfgJYbOHzyhwxRWRhrXRNGbAtvEDp11xXAx40uDbpLLVvZzk56kWTQpCYG3cLnX16O6AzxsZ2o8-KCqgvaAXKKso5SYVAfSlGXUyLOBNDHMUlxWExDBxEh2fZBXEnXaUqkxfzRQ7Yvth4vKRtafwsIg8hJVQV7hzsLc6UjPM2oeOZxt1DYHzQT2TYCjE1suHDtGHsPzdGtTdAfADIZXPgLn8wgynQXCoXdheq9x2nyWzz6uXhx5z1GKlAhiQ_SZLxTWBuUizv-kQta30J8jpusbPbg7tMM6DwprRz-CBb-ztxBvXgpHigmHfGN2XRY0p-uYyeduo_D_MzRIBaGuO1UQU6ZqOVq-f7bpPhzZ-sIHc3h7PSnmlw06dJ1aVQLe6Zq0cWqzO0tdeqJW9gtYaluaEKbNGO4lV6o4ecUfGipdlxcjgVBrT9y2MD84RzyuwCpmJtNjuj6Tqj7Ptf7PRwHFj4R5yiMjOILC63fDe4xAu9Ktg0XheQ-pHA9vj6ftbqP_prylOX1jO_eEBoeVfRDpVSbowrPSb6Oq2z0370U7tS1KoRR3x5Mz-KiHR7_zQ7_dqIqoRCxT3n8A6z0ihT4Bl48bQOIRJjfqSnzRLQSpWCkPFc_s1XPlAo1wJ75H4ZaSsaDj3q-GQannflZsFEwu3UYhOtC3DQ05STdytcMjTN7FfrM5KD7NvYfAgPcskkjPwA-j7nTjY1Kwc4R1F7SG8YjhW16dU2PlQxM1b0usOy2Sj5MzfSCa9vmtwQ6s3evEX6TDHRo811ZVpn62yQGB9NEbyyQ1roWe7qUMB1eRr1VFd0DXxPstq7-xec-6Pjx53ndwdqC1cS6lC-_JvnntAbrPg3GraZo8-riDBRJA7pYiUfI5hX92NWmOsyYYPd8Ev9c7-148D3IovUwInguyQdNFOsTZW_WwOyF5k5xsR1ApiU9j6OnO73eyzJNzwL69YhCzx4yyr0eFre_78Qan2Vv0nfOO6kINSVcwZRQoNTVYni0ovHJxbqk6ShaXNgsNvGAkkflqzNZnvgBB_9KZfvvSQwZ880X60VQPTc83jhSJUlrork8j11nQKFLfEzh_qx7ihUefoiFe0rVQE2w1LVUXMgvgEt4TESQnp0PMNIJpvGryYRDfD6WiJZK4TZKkx6XxOflvxuHFUvxn9oXYtG-Oe6CwcoJbWYA9xdv4dhYUH3mzQLrma8npZ96xA6h5oxLdsQSf_7zijakEJVx6ALdy1LpbxjXUix4J5fbBRSePFc3lC6TnHek6dyRPuxD6GdwOpNb0n9wQcGR_skyQnLlC8IYKW_tZjV1Flp9SjWKjNvRTxIdHq61eBE-4qumFtqnFjRGxwwcPsTtqRN7aYbOORK8m8ZdlN4yjDgBzNyX4P6I34BXBb49zHvA0vY4nboPrDH14Bc3soa2OZze7759Jkg-ZuqsATh1Zr6EyE5F-7YTzEJyEy5ozuzUhCFCnuRxz8f3iNyuIQ-Hme-fgDV79F1l40F14eNe2C_BdbKJ34HF9ungK72XmGfbgupq78NVlhkvbJqNqPNliwbOJRFWAdtL5Kox9oHMRH2hs3BDWrzRy
' Generated on: 2026-01-13T16:34:00.527184878

@startuml
skinparam classAttributeIconSize 0
hide circle

class TaskServiceImpl {
  -taskRepository: TaskRepository
  -eventRepository: EventRepository
  -userRepository: UserRepository
  -teamRepository: TeamRepository
  -focusService: FocusService
  --
  +TaskServiceImpl(taskRepository: TaskRepository, eventRepository: EventRepository, userRepository: UserRepository, teamRepository: TeamRepository, focusService: FocusService)
  +getTasksByTeam(teamId: Long): List<Task>
  +getTasksByUserId(userId: Long): List<Task>
  +getTasksAssignedToUser(userId: Long): List<Task>
  +getDelegatedTasks(creatorId: Long): List<Task>
  +getTaskById(id: Long): Task
  +createTask(task: Task, creatorId: Long): Task
  +updateTask(taskId: Long, updatedTask: Task, currentUserId: Long): Task
  +updateTask(id: Long, updatedTask: Task): Task
  +deleteTask(id: Long): void
  +planifyTask(taskId: Long, start: LocalDateTime, end: LocalDateTime): Task
}

class FocusBlock {
  -id: Long
  -user: User
  -startTime: LocalDateTime
  -endTime: LocalDateTime
  -flexibility: int
  -isProtected: boolean
  -status: String = "ACTIVE"
  -suggestedBySystem: boolean
}

class Event {
  -id: Long
  -summary: String
  -startTime: LocalDateTime
  -endTime: LocalDateTime
  -category: ActivityCategory
  -location: Location
  -status: String = "PLANNED"
  -user: User
  -task: Task
  -departures: List<TravelTime>
  -arrivals: List<TravelTime>
  --
  +Event()
  +Event(summary: String, startTime: LocalDateTime, endTime: LocalDateTime)
  +Event(summary: String, startTime: LocalDateTime, endTime: LocalDateTime, user: User)
  +getId(): Long
  +setId(id: Long): void
  +getUserId(): Long
  +getSummary(): String
  +setSummary(summary: String): void
  +getStartTime(): LocalDateTime
  +setStartTime(startTime: LocalDateTime): void
  +getEndTime(): LocalDateTime
  +setEndTime(endTime: LocalDateTime): void
  +getStatus(): String
  +setStatus(status: String): void
  +getUser(): User
  +setUser(user: User): void
  +getLocation(): Location
  +setLocation(location: Location): void
  +getTask(): Task
  +setTask(task: Task): void
  +getCategory(): ActivityCategory
  +setCategory(category: ActivityCategory): void
  +hashCode(): int
  +equals(obj: Object): boolean
  -preRemove(): void
}

class FocusService {
  -eventRepository: EventRepository
  -preferenceRepository: UserFocusPreferenceRepository
  --
  +getPreferences(userId: Long): UserFocusPreference
  +updatePreferences(userId: Long, newPrefs: UserFocusPreference): UserFocusPreference
  +validateDayNotOverloaded(userId: Long, dateTime: LocalDateTime): void
  +findFreeGaps(userId: Long, date: LocalDate): List<TimeSlot>
  +getOptimizedFocusSlots(userId: Long, date: LocalDate): List<TimeSlot>
  +estBloqueParLeFocus(userId: Long, debut: LocalDateTime, fin: LocalDateTime): boolean
}

class EventController {
  -eventService: EventService
  -focusService: FocusService
  --
  +EventController(eventService: EventService, focusService: FocusService)
  +getEventsByUser(userId: Long): ResponseEntity<List<Event>>
  +getEventsByUserAndPeriod(userId: Long, start: String, end: String): ResponseEntity<List<Event>>
  +getEventById(id: Long): ResponseEntity<?>
  +createEvent(eventRequest: EventRequest): ResponseEntity<?>
  +updateEvent(id: Long, eventRequest: EventRequest): ResponseEntity<Event>
  +deleteEvent(id: Long): ResponseEntity<?>
  +recalculateTravelTimes(userId: Long, useGoogleMaps: Boolean): ResponseEntity<?>
}

class EventRequest {
  -summary: String
  -startTime: LocalDateTime
  -endTime: LocalDateTime
  -userId: Long
  -location: LocationRequest
  -category: String
  -transportMode: String
  -useGoogleMaps: Boolean
  --
  +getSummary(): String
  +setSummary(summary: String): void
  +getStartTime(): LocalDateTime
  +setStartTime(startTime: LocalDateTime): void
  +getEndTime(): LocalDateTime
  +setEndTime(endTime: LocalDateTime): void
  +getUserId(): Long
  +setUserId(userId: Long): void
  +getLocation(): LocationRequest
  +setLocation(location: LocationRequest): void
  +getTransportMode(): String
  +setTransportMode(transportMode: String): void
  +getCategory(): String
  +setCategory(category: String): void
  +getUseGoogleMaps(): Boolean
  +setUseGoogleMaps(useGoogleMaps: Boolean): void
}

class LocationRequest {
  -address: String
  -latitude: Double
  -longitude: Double
  -name: String
  --
  +getAddress(): String
  +setAddress(address: String): void
  +getLatitude(): Double
  +setLatitude(latitude: Double): void
  +getLongitude(): Double
  +setLongitude(longitude: Double): void
  +getName(): String
  +setName(name: String): void
  +toLocation(): Location
}

class User {
  -id: Long
  -username: String
  -password: String
  -events: List<Event>
  -tasks: List<Task>
  -teams: List<Team>
  --
  +User()
  +User(username: String, password: String)
  +hashCode(): int
  +equals(obj: Object): boolean
  +getId(): Long
  +setId(id: Long): void
  +getUsername(): String
  +setUsername(username: String): void
  +getPassword(): String
  +setPassword(password: String): void
  +getEvents(): List<Event>
  +setEvents(events: List<Event>): void
  +getTasks(): List<Task>
  +setTasks(tasks: List<Task>): void
  +getTeams(): List<Team>
  +setTeams(teams: List<Team>): void
}

class FocusController {
  -focusService: FocusService
  --
  +getFocusSuggestions(userId: Long, date: LocalDate): ResponseEntity<List<TimeSlot>>
}

class Task {
  -id: Long
  -deadline: LocalDateTime
  -late: boolean = false
  -title: String
  -estimatedDuration: int
  -priority: int
  -done: boolean
  -user: User
  -event: Event
  -assignee: User
  -team: Team
  --
  +Task()
  +Task(title: String, estimatedDuration: int, priority: int, done: boolean, user: User, deadline: LocalDateTime)
  +Task(title: String, estimatedDuration: int, priority: int, done: boolean, user: User, event: Event)
  +Task(title: String, estimatedDuration: int, priority: int, done: boolean, creator: User, assignee: User, team: Team)
  +getId(): Long
  +setId(id: Long): void
  +getTitle(): String
  +setTitle(title: String): void
  +getEstimatedDuration(): int
  +setEstimatedDuration(estimatedDuration: int): void
  +getPriority(): int
  +setPriority(priority: int): void
  +isDone(): boolean
  +setDone(done: boolean): void
  +getUser(): User
  +getUserId(): Long
  +setUser(user: User): void
  +getEvent(): Event
  +getEventId(): Long
  +setEvent(event: Event): void
  +getAssignee(): User
  +setAssignee(assignee: User): void
  +getTeam(): Team
  +setTeam(team: Team): void
  +isDelegated(): boolean
  +isLate(): boolean
  +setLate(late: boolean): void
  +getDeadline(): LocalDateTime
  +setDeadline(deadline: LocalDateTime): void
  +getDuration(): int
}

class DefaultScheduleOptimizerService {
  -eventRepository: EventRepository
  -taskRepository: TaskRepository
  -taskSelectionStrategy: TaskSelectionStrategy
  -travelTimeService: TravelTimeService
  -focusService: FocusService
  --
  +DefaultScheduleOptimizerService(eventRepository: EventRepository, taskRepository: TaskRepository, taskSelectionStrategy: TaskSelectionStrategy, travelTimeService: TravelTimeService, focusService: FocusService)
  +reshuffle(userId: Long): void
  -findCollision(start: LocalDateTime, end: LocalDateTime, events: List<Event>): Event
}

class TaskController {
  -taskService: TaskService
  -focusService: FocusService
  --
  +TaskController(taskService: TaskService, focusService: FocusService)
  +getUserTasks(userId: Long): ResponseEntity<List<Task>>
  +getDelegatedTasks(userId: Long): ResponseEntity<List<Task>>
  +createTaskForUser(userId: Long, task: Task): ResponseEntity<Task>
  +updateTask(id: Long, task: Task, userId: Long): ResponseEntity<Task>
  +deleteTask(id: Long): ResponseEntity<Void>
  +planifyTask(taskId: Long, start: LocalDateTime, end: LocalDateTime): ResponseEntity<?>
  +getTeamTasks(teamId: Long): ResponseEntity<List<Task>>
}

class UserFocusPreference {
  -userId: Long
  -maxEventsPerDay: int = 5
  -minFocusDuration: int = 60
  -focusModeEnabled: boolean = true
  -preferredFocusTime: FocusTimePreference = FocusTimePreference.MATIN
  --
  +UserFocusPreference()
  +UserFocusPreference(userId: Long)
  +getUserId(): Long
  +getMaxEventsPerDay(): int
  +getMinFocusDuration(): int
  +getPreferredFocusTime(): FocusTimePreference
  +setUserId(userId: Long): void
  +setMaxEventsPerDay(maxEventsPerDay: int): void
  +setMinFocusDuration(minFocusDuration: int): void
  +setPreferredFocusTime(preferredFocusTime: FocusTimePreference): void
  +isFocusModeEnabled(): boolean
  +setFocusModeEnabled(focusModeEnabled: boolean): void
}

TaskServiceImpl *-- FocusService
TaskServiceImpl ..> Task
FocusBlock *-- User
Event *-- User
Event *-- Task
FocusService ..> UserFocusPreference
EventController *-- FocusService
EventController ..> EventRequest
EventRequest *-- LocationRequest
User o-- Event
User o-- Task
FocusController *-- FocusService
Task *-- User
Task *-- Event
DefaultScheduleOptimizerService *-- FocusService
DefaultScheduleOptimizerService ..> Event
TaskController *-- FocusService
TaskController ..> Task
@enduml